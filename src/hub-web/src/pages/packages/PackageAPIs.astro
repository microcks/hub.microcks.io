---
import { getMocksByPackageApis } from "@client/sdk.gen";

const apiPackage = Astro.props.api as string;

const mocks = await getMocksByPackageApis({
    path: {
        package: apiPackage,
    },
});
---

<div class="flex flex-col gap-4">
    <h2
        class="scroll-m-20 border-b pb-2 text-3xl font-semibold tracking-tight first:mt-0"
    >
        APIs
    </h2>
    <div class="flex flex-col gap-2">
        {
            mocks.data?.map((api) => (
                <a href={`/packages/${apiPackage}/api/${api.name}`}>
                    <div class="relative bg-white rounded-md shadow-sm p-4">
                        <div class="flex items-center gap-2">
                            <div class="relative">
                                <img
                                    class="w-full h-8 object-scale-down"
                                    src={api.imgUrl}
                                    alt={api.displayName}
                                />
                            </div>
                            <h3 class="font-semibold tracking-tight">
                                {api.displayName}
                            </h3>
                        </div>
                        <p class="relative line-clamp-2">{api.description}</p>
                    </div>
                </a>
            ))
        }
    </div>
</div>
